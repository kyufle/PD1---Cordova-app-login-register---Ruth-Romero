<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div>
        <h1 id="login">Login</h1>
        <label for="usuari">Name: <input id="usuari" type="text"></label>
        <label for="contrasenya">Password: <input id="contrasenya" type="password"></label>
        <button id="login" onclick="fer_login()">Login</button>
        <p id="loginP"></p>
        <p id="dont-haveaccount">Do you don't have account yet? <a href="#signin">Sign in</a></p>
        <h1 id="signin">Sign in</h1>
        <label for="reg_usuari">Name: <input id="reg_usuari" type="text"></label>
        <label for="reg_email">Email: <input id="reg_email" type="text"></label>
        <label for="reg_contrasenya_1">Password: <input id="reg_contrasenya_1" type="password"></label>
        <label for="reg_contrasenya_2">Repeat password: <input id="reg_contrasenya_2" type="password"></label>
        <p id="signInP"></p>
        <button id="signin" onclick="registra()">Registra</button>
        <p id="dont-haveaccount">Already have an account? <a href="#login">Login</a></p>
    </div>
    
    <script>
    const usersAndPassword = {
        ieti : {
            correo: '',
            password: 'cordova'
        },
    };

    function fer_login(){
        const usuari = document.getElementById("usuari").value;
        const contrasenya = document.getElementById("contrasenya").value;
        const loginP = document.getElementById("loginP");
        let login = false;
        for (users in usersAndPassword){
            if (users === usuari && usersAndPassword[users].password === contrasenya){
                login = true;
            }
        }
        if (login){
            loginP.textContent = "The user and password are correct";
            loginP.classList.remove("incorrect");
            loginP.classList.add("correct");
            alert("Login exit√≥s");
            
        } else{
            loginP.textContent = "The user and password are incorrect";
            loginP.classList.remove("correct");
            loginP.classList.add("incorrect");
            alert("Login incorrecte");
        }
    }
    
    function registra(){
        const reg_usuari  = document.getElementById("reg_usuari").value;
        const reg_email = document.getElementById("reg_email").value;
        const reg_contrasenya_1 = document.getElementById("reg_contrasenya_1").value;
        const reg_contrasenya_2 = document.getElementById("reg_contrasenya_2").value;
        let existente = false;
        for (users in usersAndPassword){
            if (reg_usuari === users || reg_email === usersAndPassword[users].correo){
                existente = true;
                alert("El nom o l'email ja existeix a la base de dades");
                signInP.textContent = "The name or email already exists in the database.";
                signInP.classList.remove("correct");
                signInP.classList.add("incorrect");
            }
        }
        if (reg_contrasenya_1 != reg_contrasenya_2){
            alert("Error en les contrasenyes");
            signInP.textContent = "Password error.";
            signInP.classList.remove("correct");
            signInP.classList.add("incorrect");
            
        }
        if (!existente && reg_contrasenya_1 === reg_contrasenya_2){
            usersAndPassword[reg_usuari] = {
                correo: reg_email,
                password: reg_contrasenya_1
            }
            alert("Nou usuari registrat correctament");
            signInP.textContent = "Successfully created.";
            signInP.classList.remove("incorrect");
            signInP.classList.add("correct");
            
        }
    }
    </script>
</body>
</html>
